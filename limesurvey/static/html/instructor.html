<div class="limesurvey-instructor-wrapper"></div>
<div class="paragon-styles">
    <div class="pgn__data-table-container">
      <table role="table" class="pgn__data-table is-striped">
        <thead>
          <tr role="row">
            <th colspan="1" role="columnheader">
              <span class="d-flex align-items-center"
                ><span>Component</span></span
              >
            </th>
            <th colspan="1" role="columnheader">
              <span class="d-flex align-items-center"
                ><span>Management Console</span></span
              >
            </th>
          </tr>
        </thead>
        <tbody role="rowgroup">
          {% for name, url in xblock_urls %}
          <tr role="row" class="pgn__data-table-row">
            <td role="cell" class="pgn__data-table-cell-wrap">{{ name }}</td>
            <td role="cell" class="pgn__data-table-cell-wrap">
              <a class="admin-panel" href="{{ url }}/admin/"
                ><button class="btn btn-primary" ="button">
                  Management Console
                </button></a
              >
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

<!-- This script is because it's currently not possible to add sections dinamically from the frontend. -->
<script type="text/javascript">
    $(function () {
        $('.limesurvey-instructor-wrapper').hide();
        $('.admin-panel').click(function (e) {
            e.preventDefault();
            $('.limesurvey-instructor-wrapper').show();
            const url = $(this).attr('href');
            $('.limesurvey-instructor-wrapper').append(`
                <a href="" class="go-back">‚Üê Back</a>
                <div>
                    <iframe
                        class="limesurvey-admin-iframe"
                        frameborder="0"
                        src="${url}">
                    </iframe>
                </div>
            `);
            $('.paragon-styles').hide();
            $('.go-back').click(function (e) {
                e.preventDefault();
                $('.paragon-styles').show();
                $('.limesurvey-instructor-wrapper').html('');
                $(this).hide();
            });
        })
    });
</script>
